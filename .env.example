# ----------------------------------------------------------------------------
# OpenCode Web / Auth
# ----------------------------------------------------------------------------
# Basic auth for the OpenCode web UI (used by your setup)
OPENCODE_SERVER_USERNAME=admin
OPENCODE_SERVER_PASSWORD=change-me

# Node environment for the opencode container
NODE_ENV=production

# Host/IP that opencode web binds to inside the container
OPENCODE_WEB_HOST=0.0.0.0

# Host port to publish the OpenCode web UI via ingress-proxy
OPENCODE_PORT=4096

# Comma-separated list of allowed CORS origins
# Example: https://code.example.com,https://auth.example.com
OPENCODE_WEB_CORS=https://code.example.com,https://auth.example.com

# ----------------------------------------------------------------------------
# OpenCode Config (paths inside the container)
# ----------------------------------------------------------------------------
# Path to the main config file used by opencode
OPENCODE_CONFIG=/home/opencode/.config/opencode/opencode.jsonc

# Directory for opencode configs and project mappings
OPENCODE_CONFIG_DIR=/home/opencode/.config/opencode

# Optional: inline JSON config override (advanced)
# OPENCODE_CONFIG_CONTENT={"key":"value"}

# Optional: pin OpenCode version installed in the image
# OPENCODE_VERSION=1.1.34

# ----------------------------------------------------------------------------
# Projects / Workspace
# ----------------------------------------------------------------------------
# Host path that will be mounted into the opencode container as /home/opencode/projects
# This must exist on the host.
OPENCODE_PROJECTS_DIR=/Users/you/projects

# ----------------------------------------------------------------------------
# Docker-in-Docker helpers
# ----------------------------------------------------------------------------
# Optional: forward local ports inside the opencode container to the DinD network.
# Useful when you run app containers (e.g. Next.js) inside DinD and want
# to access them from within opencode via localhost.
# Comma-separated list of ports.
OPENCODE_DIND_FORWARD_PORTS=3000

# ----------------------------------------------------------------------------
# Egress allowlists (not env vars)
# ----------------------------------------------------------------------------
# Edit these files to control outbound access:
# - egress/allowed-domains.txt (domain allowlist)
# - egress/allowed-ips.txt     (IP/CIDR allowlist)
